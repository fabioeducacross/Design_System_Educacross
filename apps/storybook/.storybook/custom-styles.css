/* ===============================================
   EDUCACROSS DESIGN SYSTEM - STORYBOOK UI STYLES
   Pixel Perfect Mode - Não conflita com tokens do DS
   Versão Storybook 10+ Compatible
   =============================================== */

/**
 * ⚠️ IMPORTANTE - Pixel Perfect Mode:
 * - Este arquivo estiliza APENAS o Storybook UI (sidebar, docs, toolbar)
 * - NÃO define variáveis CSS que conflitam com o Design System
 * - O canvas de preview herda os tokens oficiais do DS
 * - Use prefixo --sb- para variáveis específicas do Storybook
 */

/* ========== STORYBOOK UI VARIABLES (namespace isolado) ========== */
:root {
    /* Storybook UI - cores específicas da interface (não do DS) */
    --sb-bg-page: #FAFBFC;
    --sb-bg-card: #FFFFFF;
    --sb-bg-sidebar: #FFFFFF;
    --sb-bg-hover: #F8F9FB;
    
    /* Storybook UI - texto */
    --sb-text-primary: #111827;
    --sb-text-secondary: #6B7280;
    --sb-text-tertiary: #9CA3AF;
    
    /* Storybook UI - bordas */
    --sb-border-light: #F3F4F6;
    --sb-border: #E5E7EB;
    --sb-border-medium: #D1D5DB;
    
    /* Storybook UI - sombras */
    --sb-shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
    --sb-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.06);
    --sb-shadow-md: 0 4px 8px rgba(0, 0, 0, 0.08);
    --sb-shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.1);
    
    /* Acento do Storybook - usa cor primária do DS */
    --sb-accent: var(--color-primary-500, #6E63E8);
    --sb-accent-light: var(--color-primary-400, #8E88EB);
    --sb-accent-dark: var(--color-primary-600, #635AD1);
}

/* ========== STORYBOOK LAYOUT ========== */
body.sb-main-padded,
#storybook-root {
    background: var(--sb-bg-page) !important;
}

/* ========== SIDEBAR LIGHT THEME ========== */
aside[role="navigation"],
nav[aria-label*="sidebar" i],
div[class*="sidebar" i]:not([class*="story"]),
div[id*="sidebar" i] {
    background: var(--sb-bg-sidebar) !important;
    border-right: 1px solid var(--sb-border) !important;
    box-shadow: 2px 0 8px rgba(110, 99, 232, 0.04) !important;
}

/* Links de navegação elegantes */
nav a,
aside a,
[role="tree"] a,
[role="treeitem"] a,
div[class*="TreeNode" i] a,
div[class*="LeafNode" i] a {
    border-radius: 10px !important;
    padding: 10px 14px !important;
    margin: 3px 8px !important;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
    font-weight: 500 !important;
    color: var(--sb-text-secondary) !important;
    font-size: 0.95rem !important;
}

/* Hover vibrante - usa cor primária do DS */
nav a:hover,
aside a:hover,
[role="treeitem"]:hover a,
div[class*="TreeNode" i]:hover a,
div[class*="LeafNode" i]:hover a {
    background: linear-gradient(135deg, rgba(110, 99, 232, 0.12) 0%, rgba(142, 136, 235, 0.08) 100%) !important;
    transform: translateX(4px);
    box-shadow: inset 4px 0 0 var(--sb-accent), var(--sb-shadow-sm) !important;
    color: var(--sb-accent) !important;
}

/* Selected state com gradiente - usa cor primária do DS */
nav a[aria-current],
aside a[aria-current],
[role="treeitem"][aria-selected="true"] a,
[data-selected="true"],
[aria-selected="true"],
div[class*="TreeNode" i][class*="selected" i] a,
div[class*="LeafNode" i][class*="selected" i] a {
    background: linear-gradient(135deg, rgba(110, 99, 232, 0.18) 0%, rgba(142, 136, 235, 0.12) 100%) !important;
    border-left: 5px solid var(--sb-accent) !important;
    font-weight: 700 !important;
    color: var(--sb-accent-dark) !important;
    box-shadow: var(--sb-shadow-md) !important;
}

/* ========== DOCS PAGE ========== */
main[id*="storybook" i],
div[class*="DocsContent" i],
div[class*="sbdocs" i],
article {
    max-width: 1200px !important;
    padding: 48px 64px !important;
    margin: 0 auto !important;
    background: var(--sb-bg-card) !important;
    min-height: 100vh !important;
}

/* Títulos com gradiente - usa paleta primária do DS */
main h1,
article h1,
div[class*="sbdocs" i] h1 {
    font-size: 3rem !important;
    font-weight: 800 !important;
    letter-spacing: -0.04em !important;
    margin-bottom: 36px !important;
    margin-top: 0 !important;
    background: linear-gradient(135deg, 
        var(--color-primary-500, #6E63E8) 0%, 
        var(--color-primary-400, #8E88EB) 50%, 
        var(--color-primary-200, #C1BDF4) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1.15 !important;
}

main h2,
article h2,
div[class*="sbdocs" i] h2 {
    font-size: 1.5rem !important;
    font-weight: 600 !important;
    margin-top: 48px !important;
    margin-bottom: 16px !important;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--sb-border-light);
    color: var(--sb-text-primary) !important;
    letter-spacing: -0.02em !important;
}

main h3,
article h3,
div[class*="sbdocs" i] h3 {
    font-size: 1.25rem !important;
    font-weight: 600 !important;
    margin-top: 32px !important;
    margin-bottom: 12px !important;
    color: var(--sb-text-primary) !important;
}

/* Paragraphs */
main p,
article p,
div[class*="sbdocs" i] p {
    line-height: 1.7 !important;
    margin-bottom: 16px !important;
    color: var(--sb-text-secondary) !important;
    font-size: 1rem !important;
    max-width: 68ch !important;
}

/* Lists */
main ul,
main ol,
article ul,
article ol {
    margin: 16px 0 !important;
    padding-left: 24px !important;
}

main li,
article li {
    line-height: 1.7 !important;
    margin-bottom: 8px !important;
    color: var(--sb-text-secondary) !important;
}

/* ========== CODE BLOCKS ========== */
pre,
div[class*="prismjs" i],
code[class*="prism" i] {
    border-radius: 14px !important;
    padding: 28px !important;
    background: linear-gradient(135deg, #F8F9FA 0%, #FFFFFF 100%) !important;
    border: 2px solid var(--sb-border) !important;
    box-shadow: var(--sb-shadow-md) !important;
    margin: 28px 0 !important;
}

code,
pre code {
    font-family: "JetBrains Mono", "Fira Code", "SF Mono", Consolas, monospace !important;
    font-size: 0.92em !important;
    line-height: 1.7 !important;
    color: var(--sb-text-primary) !important;
}

/* Inline code - usa cor primária do DS */
p code:not([class*="prism" i]),
li code:not([class*="prism" i]),
td code:not([class*="prism" i]) {
    background: linear-gradient(135deg, rgba(110, 99, 232, 0.15) 0%, rgba(193, 189, 244, 0.12) 100%) !important;
    color: var(--sb-accent-dark) !important;
    padding: 4px 10px !important;
    border-radius: 7px !important;
    font-weight: 700 !important;
    font-size: 0.92em !important;
    border: 1px solid var(--sb-border) !important;
}

/* ========== COMPONENT PREVIEW ========== */
div[class*="Canvas" i],
div[id*="story" i]:not(#storybook-root),
div[class*="DocsStory" i] {
    border-radius: 14px !important;
    overflow: hidden !important;
    border: 1px solid var(--sb-border-light) !important;
    box-shadow: var(--sb-shadow-sm) !important;
    margin: 32px 0 !important;
    background: var(--sb-bg-card) !important;
}

/* Toolbar */
div[class*="toolbar" i],
div[id*="toolbar" i] {
    border-radius: 14px 14px 0 0 !important;
    background: var(--sb-bg-page) !important;
    border-bottom: 1px solid var(--sb-border-light) !important;
    padding: 8px 12px !important;
}

/* ========== TABLES ========== */
table {
    border-radius: 10px !important;
    overflow: hidden !important;
    border: 1px solid var(--sb-border-light) !important;
    margin: 24px 0 !important;
    width: 100% !important;
    border-collapse: separate !important;
    border-spacing: 0 !important;
}

thead th,
th {
    background: var(--sb-bg-page) !important;
    font-weight: 600 !important;
    padding: 12px 16px !important;
    text-align: left !important;
    color: var(--sb-text-primary) !important;
    border-bottom: 1px solid var(--sb-border) !important;
    font-size: 0.875rem !important;
}

tbody td,
td {
    padding: 12px 16px !important;
    border-bottom: 1px solid var(--sb-border-light) !important;
    color: var(--sb-text-secondary) !important;
    font-size: 0.875rem !important;
}

tbody tr:last-child td {
    border-bottom: none !important;
}

tbody tr:hover {
    background: var(--sb-bg-hover) !important;
}

/* ========== FORM CONTROLS ========== */
div[id*="panel" i],
div[id*="control" i],
div[role="tabpanel"] {
    padding: 24px !important;
}

input[type="text"],
input[type="number"],
textarea,
select {
    border-radius: 10px !important;
    padding: 8px 12px !important;
    border: 1px solid var(--sb-border) !important;
    transition: all 0.15s ease !important;
    font-size: 0.875rem !important;
    background: var(--sb-bg-card) !important;
    color: var(--sb-text-primary) !important;
}

input:focus,
textarea:focus,
select:focus {
    border-color: var(--sb-accent) !important;
    box-shadow: 0 0 0 3px rgba(110, 99, 232, 0.1) !important;
    outline: none !important;
}

/* Buttons */
button:not([class*="Icon" i]) {
    border-radius: 10px !important;
    padding: 8px 16px !important;
    font-weight: 500 !important;
    transition: all 0.15s ease !important;
    font-size: 0.875rem !important;
}

button[class*="primary" i] {
    background: var(--sb-accent) !important;
    color: white !important;
    border: none !important;
}

button[class*="primary" i]:hover {
    background: var(--sb-accent-dark) !important;
    box-shadow: var(--sb-shadow-md) !important;
}

/* Search */
input[type="search"],
input[placeholder*="Find" i],
input[placeholder*="Search" i] {
    border-radius: 10px !important;
    padding: 8px 12px !important;
    padding-left: 32px !important;
    border: 1px solid var(--sb-border-light) !important;
    background: var(--sb-bg-card) !important;
    transition: all 0.15s ease !important;
    font-size: 0.875rem !important;
}

input[type="search"]:focus,
input[placeholder*="Find" i]:focus,
input[placeholder*="Search" i]:focus {
    border-color: var(--sb-accent) !important;
    box-shadow: 0 0 0 4px rgba(110, 99, 232, 0.12) !important;
    outline: none !important;
}

/* ========== BADGES ========== */
span[class*="badge" i],
span[class*="tag" i],
div[class*="badge" i] {
    border-radius: 6px !important;
    padding: 2px 8px !important;
    font-weight: 500 !important;
    font-size: 0.75rem !important;
    background: var(--sb-bg-hover) !important;
    border: 1px solid var(--sb-border-light) !important;
    color: var(--sb-text-secondary) !important;
}

/* ========== ANIMATIONS ========== */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

main > *,
article > *,
div[class*="sbdocs" i] > * {
    animation: fadeIn 0.3s ease-out;
}

/* ========== SCROLLBAR ========== */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--sb-border-medium) transparent;
}

::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--sb-border-medium);
    border-radius: 4px;
    border: 2px solid transparent;
    background-clip: padding-box;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--sb-text-tertiary);
    background-clip: padding-box;
}

/* ========== ACCESSIBILITY ========== */
*:focus-visible {
    outline: 2px solid var(--sb-accent) !important;
    outline-offset: 2px !important;
}

*:focus:not(:focus-visible) {
    outline: none !important;
}

/* Links na docs */
article a,
div[class*="sbdocs" i] a {
    color: var(--sb-accent) !important;
    text-decoration: none !important;
}

article a:hover,
div[class*="sbdocs" i] a:hover {
    text-decoration: underline !important;
}

/* ========== PANELS ========== */
main,
article,
aside,
nav,
div[id*="panel" i],
div[class*="Panel" i] {
    background: var(--sb-bg-card) !important;
}

header,
div[role="banner"],
div[class*="toolbar" i] {
    background: var(--sb-bg-card) !important;
    border-bottom: 1px solid var(--sb-border) !important;
    box-shadow: var(--sb-shadow-sm) !important;
}

/* Canvas preview */
div[id*="storybook-preview" i],
iframe {
    border-radius: 14px !important;
    box-shadow: var(--sb-shadow-md) !important;
    border: 2px solid var(--sb-border) !important;
}

/* ========== UTILITY CLASSES (prefixo sb-) ========== */
.sb-card {
    border-radius: 14px !important;
    padding: 24px !important;
    border: 1px solid var(--sb-border-light) !important;
    box-shadow: var(--sb-shadow-sm) !important;
    background: var(--sb-bg-card) !important;
}

.sb-divider {
    height: 1px !important;
    background: var(--sb-border-light) !important;
    margin: 32px 0 !important;
    border: none !important;
}

/* Elevation */
.sb-elevation-0 { box-shadow: none !important; }
.sb-elevation-1 { box-shadow: var(--sb-shadow-xs) !important; }
.sb-elevation-2 { box-shadow: var(--sb-shadow-sm) !important; }
.sb-elevation-3 { box-shadow: var(--sb-shadow-md) !important; }
.sb-elevation-4 { box-shadow: var(--sb-shadow-lg) !important; }
